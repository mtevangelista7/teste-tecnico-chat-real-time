@inherits GuildChannelsBase
@page "/Guilds/{GuildId:guid}"

<PageTitle>Canais</PageTitle>

@if (!GuildId.Equals(Guid.Empty))
{
    <div>
        <MudAppBar Color="Color.Primary" Fixed="false" Dense="true">
            <MudIconButton Icon="@Icons.Material.Filled.Pix" Color="Color.Inherit" Edge="Edge.Start"/>
            <MudSpacer/>
            <MudStack AlignItems="AlignItems.Center" Row="true">
                <MudText>@Username</MudText>
                <MudIconButton OnClick="LogOutUser" Icon="@Icons.Material.Filled.Logout" Color="Color.Inherit"/>
            </MudStack>
        </MudAppBar>

        <MudPaper Class="mud-theme-primary d-flex align-center justify-center" Height="calc(50dvh - 48px)">
            <MudGrid Spacing="0">
                <MudItem xs="12">
                    <MudGrid Spacing="0" Justify="Justify.Center">
                        <MudItem xs="12" sm="8" md="6">
                            <MudStack>
                                <MudText Align="Align.Center" Class="white-text" Typo="Typo.h4">
                                    Canais do servidor: @GuildMain.Name
                                </MudText>

                                <MudText Align="Align.Center">
                                    um texto legal aqui
                                </MudText>

                                <MudTextField T="string"
                                              Margin="Margin.Dense"
                                              Placeholder="Search"
                                              Variant="Variant.Outlined"
                                              Adornment="Adornment.End"
                                              AdornmentIcon="@Icons.Material.Filled.Search"
                                              AdornmentColor="Color.Tertiary"/>

                                <MudButton Disabled="@Processing" OnClick="OnClickAddNewChannel" Size="Size.Large" Variant="Variant.Filled" Color="Color.Success">
                                    @if (Processing)
                                    {
                                        <MudProgressCircular Class="ms-n1" Size="Size.Small" Indeterminate="true"/>
                                        <MudText Class="ms-2">Processando</MudText>
                                    }
                                    else
                                    {
                                        <MudText>Criar novo canal de texto</MudText>
                                    }
                                </MudButton>
                            </MudStack>
                        </MudItem>
                    </MudGrid>
                </MudItem>
            </MudGrid>
        </MudPaper>

        <MudPaper Height="50dvh">
            <MudGrid Spacing="0">
                <MudItem xs="12">
                    <MudPaper Elevation="0" Width="100%" Height="100%" Class="pa-3 d-flex justify-center">
                        <MudGrid Spacing="3">

                            @if (Channels is { Count: > 0 })
                            {
                                @foreach (var channel in Channels)
                                {
                                    <MudItem xs="4">
                                        <MudGrid Spacing="2">
                                            <MudItem xs="3">
                                                <MudPaper Class="pa-1 d-flex align-center justify-center mud-theme-primary" Height="100%" Elevation="3">
                                                    <MudAvatar Size="Size.Large" Rounded="true" Color="Color.Tertiary" Variant="Variant.Outlined">
                                                        <MudIcon Icon="@Icons.Material.Filled.Person"/>
                                                    </MudAvatar>
                                                </MudPaper>
                                            </MudItem>
                                            <MudItem xs="6">
                                                <MudPaper Height="100%" Class="pa-1" Elevation="3">
                                                    <MudStack AlignItems="AlignItems.Center" Justify="Justify.Center" style="height: 100%;">
                                                        <MudText Typo="Typo.h6">
                                                            <b>@channel.Name</b>
                                                        </MudText>
                                                    </MudStack>
                                                </MudPaper>
                                            </MudItem>
                                            <MudItem xs="3">
                                                <MudStack Justify="Justify.Center" Style="height: 100%">
                                                    <MudButton Variant="Variant.Outlined" Color="Color.Success">Entrar</MudButton>
                                                </MudStack>
                                            </MudItem>
                                        </MudGrid>
                                    </MudItem>
                                }
                            }
                        </MudGrid>
                    </MudPaper>
                </MudItem>
            </MudGrid>
        </MudPaper>
    </div>
}