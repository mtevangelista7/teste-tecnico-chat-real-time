@inherits GuildsBase
@page "/Guilds"

<PageTitle>Guilds</PageTitle>

<div>

    <MudAppBar Color="Color.Primary" Fixed="false" Dense="true">
        <MudIconButton Icon="@Icons.Material.Filled.Pix" Color="Color.Inherit" Edge="Edge.Start"/>
        <MudSpacer/>
        <MudStack AlignItems="AlignItems.Center" Row="true">
            <MudText>@Username</MudText>
            <MudIconButton OnClick="LogOutUser" Icon="@Icons.Material.Filled.Logout" Color="Color.Inherit"/>
        </MudStack>
    </MudAppBar>

    <MudPaper Class="mud-theme-primary d-flex align-center justify-center" Height="calc(50dvh - 48px)">
        <MudGrid Spacing="0">
            <MudItem xs="12">
                <MudGrid Spacing="0" Justify="Justify.Center">
                    <MudItem xs="12" sm="8" md="6">
                        <MudStack>
                            <MudText Align="Align.Center" Class="white-text" Typo="Typo.h4">
                                Lista de Servidores
                            </MudText>

                            <MudText Align="Align.Center">
                                um texto legal aqui
                            </MudText>

                            <MudTextField T="string"
                                          Margin="Margin.Dense"
                                          Placeholder="Search"
                                          Variant="Variant.Outlined"
                                          Adornment="Adornment.End"
                                          AdornmentIcon="@Icons.Material.Filled.Search"
                                          AdornmentColor="Color.Tertiary"/>

                            <MudButton Disabled="@Processing" OnClick="OnClickAddNewGuild" Size="Size.Large" Variant="Variant.Filled" Color="Color.Success">
                                @if (Processing)
                                {
                                    <MudProgressCircular Class="ms-n1" Size="Size.Small" Indeterminate="true"/>
                                    <MudText Class="ms-2">Processando</MudText>
                                }
                                else
                                {
                                    <MudText>Criar novo servidor</MudText>
                                }
                            </MudButton>
                        </MudStack>
                    </MudItem>
                </MudGrid>
            </MudItem>
        </MudGrid>
    </MudPaper>

    <MudPaper Height="50dvh">
        <MudGrid Spacing="0">
            <MudItem xs="12">
                <MudPaper Elevation="0" Width="100%" Class="pa-3 d-flex justify-center">
                    <MudGrid Spacing="3">

                        @if (Guilds is { Count: > 0 })
                        {
                            @foreach (var guild in Guilds)
                            {
                                <MudItem xs="4">
                                    <MudGrid Spacing="2">
                                        <MudItem xs="3">
                                            <MudPaper Class="pa-1 d-flex align-center justify-center mud-theme-primary" Height="100%" Elevation="3">
                                                <MudAvatar Size="Size.Large" Rounded="true" Color="Color.Tertiary" Variant="Variant.Outlined">
                                                    <MudIcon Icon="@Icons.Material.Filled.Person"/>
                                                </MudAvatar>
                                            </MudPaper>
                                        </MudItem>
                                        <MudItem xs="6">
                                            <MudPaper Class="pa-1" Elevation="3">
                                                <MudStack>
                                                    <MudText Typo="Typo.h6">
                                                        <b>@guild.Name</b>
                                                    </MudText>

                                                    <MudStack>
                                                        <MudText Typo="Typo.subtitle1">@guild.MembersCount membros</MudText>
                                                        <MudText Typo="Typo.subtitle1">@guild.MessagesCount mensagens</MudText>
                                                    </MudStack>
                                                </MudStack>
                                            </MudPaper>
                                        </MudItem>
                                        <MudItem xs="3">
                                            <MudStack Justify="Justify.SpaceBetween" Style="height: 100%">
                                                <MudButton Variant="Variant.Outlined" Color="Color.Success">Entrar</MudButton>
                                                <MudButton Variant="Variant.Outlined" Color="Color.Error">Deletar</MudButton>
                                            </MudStack>
                                        </MudItem>
                                    </MudGrid>
                                </MudItem>
                            }
                        }
                    </MudGrid>
                </MudPaper>
            </MudItem>
        </MudGrid>
    </MudPaper>
</div>